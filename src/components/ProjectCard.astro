---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";

interface Props {
  project: CollectionEntry<"projects">;
}

const { project } = Astro.props;
---

<article class="bg-white border border-gray-200 rounded-xl overflow-hidden hover:border-gray-300 transition-colors">
  <!-- Image -->
  <a href={`/projects/${project.id}`} class="block">
    <div class="aspect-[16/9] overflow-hidden bg-gray-100">
      <Image
        src={project.data.image}
        alt={project.data.title}
        class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
        width={600}
        height={338}
      />
    </div>
  </a>

  <!-- Content -->
  <div class="p-6">
    <!-- Title -->
    <h3 class="text-xl font-semibold text-gray-900 mb-1">
      <a href={`/projects/${project.id}`} class="hover:text-gray-700 transition-colors">
        {project.data.title}
      </a>
    </h3>
    
    <!-- Japanese Title -->
    {project.data.titleJa && (
      <p class="text-sm text-gray-500 mb-3">
        {project.data.titleJa}
      </p>
    )}

    <!-- Description -->
    <p class="text-sm text-gray-600 mb-4 leading-relaxed">
      {project.data.description}
    </p>

    <!-- Role -->
    {project.data.role && (
      <p class="text-sm text-gray-700 mb-4">
        {project.data.role}
      </p>
    )}

    <!-- Key Tech (Max 2 lines) -->
    <div class="flex flex-wrap gap-2 mb-6 max-h-20 overflow-hidden">
      {project.data.skills.map((tech) => (
        <span class="badge badge-sm badge-neutral badge-outline">
          {tech}
        </span>
      ))}
    </div>

    <!-- Link -->
    <div class="pt-4 border-t border-gray-200">
      <a 
        href={`/projects/${project.id}`}
        class="inline-flex items-center text-sm font-medium text-gray-900 hover:text-gray-600 transition-colors"
      >
        View details
        <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>
  </div>
</article>
