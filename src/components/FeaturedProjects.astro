---
/**
 * Featured Projects Component
 * 
 * Displays up to 3 carefully selected projects that demonstrate:
 * - Research × Software × Implementation balance
 * - Problem → Role → Tech → Impact flow
 * - Supports the narrative built by Research & Skills sections
 * 
 * Projects are loaded from content/projects/*.md with featured: true
 */

import { getCollection } from "astro:content";
import ProjectCard from "./ProjectCard.astro";

const projectEntries = await getCollection("projects");

// Filter featured projects and sort by featuredOrder
const featuredProjects = projectEntries
  .filter((project) => project.data.featured === true)
  .sort((a, b) => (a.data.featuredOrder ?? 999) - (b.data.featuredOrder ?? 999))
  .slice(0, 3); // Max 3 projects
---

<section id="featured-projects" class="py-16 md:py-24 px-4">
  <div class="max-w-5xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-12 md:mb-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900">Featured Projects</h2>
      <p class="text-base md:text-lg text-gray-600 leading-relaxed max-w-3xl mx-auto">
        Selected projects demonstrating research-driven implementation with measurable business impact.
      </p>
    </div>

    <!-- Project Cards Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8">
      {featuredProjects.map((project) => (
        <ProjectCard project={project} />
      ))}
    </div>

    <!-- View All Link -->
    <div class="mt-12 text-center">
      <a 
        href="/projects" 
        class="inline-flex items-center px-6 py-3 text-base font-medium text-gray-900 border border-gray-900 rounded-lg hover:bg-gray-900 hover:text-white transition-colors"
      >
        View all projects
        <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>
  </div>
</section>
